# EMStest

## 説明
EMSメモリをいくつかのビットパターンで読み書きテストします。<br>
※メモリキャッシュは考慮していません。

## コンパイル方法
$ ia16-elf-gcc emstest.c emslib.c -li86

## 動作環境

### OS
MS-DOS汎用

### 確認環境
NEC PC-9801初代<br>
MS-DOS 5.0<br>
MELWARE 5

## 詳細

### テスト対象メモリ
EMSファンクション0x42により取得した空きページ数のすべてを使用します。<br>
※EMSを使用するプログラムをすべて外した状態で実行することをおすすめします。

### テスト内容
以下の項目の組み合わせで試験を実施します。

#### EMS物理ページ
EMSページフレームの#0から#3を順に使用します。<br>
(例：EMSページフレームが0xC0000-0xCFFFFのとき、0xC0000-0xC3FFF、0xC4000-0xC7FFF、0xC8000-0xCBFFF、0xCC000-0xCFFFFの4ページ)

#### テストパターン
メモリ読み書きデータパターンとして、以下を使用します。<br>
* 1から255の連番
* 0x00
* 0xFF
* 0x55
* 0xAA

### 試験方法
ローカルメモリ(元データ)からEMSページへの書き込み、EMSページからローカルメモリ(コピー後データ)への読み込みを行い、元データとコピー後データが一致することを確認します。<br>
データサイズはページサイズと同じ16384(0x4000)バイト。<br>
コピー方法は以下の２パターンです。<br>
* forループによるバイトコピー
* EMSファンクション0x5700によるメモリ転送
